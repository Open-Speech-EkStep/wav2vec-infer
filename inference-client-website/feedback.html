<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feedbacks</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
        integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css"
        href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.css" />
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <script src="platform.js"></script>
    <script type="text/javascript"
        src="https://cdn.datatables.net/v/bs4/jszip-2.5.0/dt-1.10.20/b-1.6.1/b-colvis-1.6.1/b-html5-1.6.1/cr-1.5.2/datatables.min.js"></script>
    <style>
        .rating {
            display: inline-block;
            width: 100%;
            margin-top: 40px;
            padding-top: 40px;
            text-align: center;
        }

        .like,
        .dislike {
            display: inline-block;
            cursor: pointer;
            margin: 10px;
        }

        .dislike:hover,
        .like:hover {
            color: #2EBDD1;
            transition: all .2s ease-in-out;
            transform: scale(1.1);
        }

        .active {
            color: #2EBDD1;
        }
    </style>
</head>

<body>
    <br />
    <br />

    <center>
        <h4>Inference Website Feedback</h4>
    </center>
    <br />
    <br />

    <div class="rating">
        <!-- Thumbs up -->
        <div class="like grow">
            <i class="fa fa-thumbs-up fa-3x like" aria-hidden="true"></i>
        </div>
        <!-- Thumbs down -->
        <div class="dislike grow">
            <i class="fa fa-thumbs-down fa-3x like" aria-hidden="true"></i>
        </div>
    </div>
    <br />
    <br />

    <table id="feedback-table" class="table table-striped table-bordered" width="100%">
        <thead>
            <tr>
                <th>Audio</th>
                <th>Text</th>
                <th>Rating</th>
                <th>Device</th>
            </tr>
        </thead>
        <tbody>

        </tbody>
    </table>
    <script>
        $(document).ready(function () {
            function getDeviceInfo() {
                const os = platform.os;
                return os.family + " " + os.version + " " + platform.product;
            }
            $('.like, .dislike').on('click', function () {
                event.preventDefault();
                $('.active').removeClass('active');
                $(this).addClass('active');

                // proceed to save the audio and details
            });
            console.log(getDeviceInfo())
            $('#feedback-table').DataTable({
                info: false,
                lengthChange: false,
                searching: false,
                processing: true,
                serverSide: true,
                ajax: "http://localhost:9008/api/feedback",
                // columnDefs: [
                //     // { className: 'text-right', targets: [1] },
                //     { className: 'text-center', targets: [0, 2, 3, 4, 5] },
                // ],
                columns: [
                    {
                        data: 'audio_path',
                        render: function (data, type, row) {
                            return '<audio controls><source src="' + data + '" type="audio/wav"></audio>'
                        }
                    },
                    {
                        data: "text"
                    },
                    {
                        data: "rating"
                    },
                    {
                        data: "device"
                    }
                ]
            });
        });
    </script>
</body>

</html>